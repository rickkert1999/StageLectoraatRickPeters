<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script>
      window.onload = function () {
        fetch("https://jsonplaceholder.typicode.com/users")
          .then((response) => response.json())
          .then((dataDB) => console.log(dataDB));

        //let dataDB = [{ dataDB }];

        const testData = [...Array(3).keys()].map((i) => {
          return {
            id: i,
            description: `descriptionp ${i}`,
            competenceType: `competence type ${i}`,
            label: `label ${i}`,
            exerGameId: 1,
            progress: [
              new Date(2021, 5, 31),
              new Date(2021, 1, 18),
              new Date(2021, 1, 5),
              new Date(2020, 11, 8),
              new Date(2020, 11, 5),
            ].map((date, index) => {
              return {
                gameName: `game name ${i}`,
                value: Math.floor(Math.random() * 20),
                studentId: 1,
                extraData: null,
                measurementMoment: date,
              };
            }),
          };
        });

        console.log(testData);

        const lines = [
          {
            color: "#0070C0",
            dash: "solid",
          },
          {
            color: "#00B0F0",
            dash: "shortDot",
          },
          {
            color: "#9BC2E6",
            dash: "longDash",
          },
        ];

        var chart = new CanvasJS.Chart("chartContainer", {
          animationEnabled: true,
          theme: "light2",
          title: {},
          axisX: {
            title: "Datum >",
            valueFormatString: "DD MMM", // DD = dag, MMM = maand, YYYY = jaar
            crosshair: {
              enabled: true,
              snapToDataPoint: true,
            },
          },
          axisY: {
            title: "Procentuele groei >",
          },
          legend: {
            cursor: "pointer",
            verticalAlign: "top",
            horizontalAlign: "left",
            dockInsidePlotArea: true,
            itemclick: toogleDataSeries,
            maxWidth: "300",
          },
          data: testData.map((competence, i) => {
            const line = lines[i] ?? lines[0];
            return {
              type: "line",
              showInLegend: true,
              name: ": " + competence.description,
              markerColor: "black",
              lineDashType: line.dash,
              xValueFormatString: "DD MM, YYYY",
              color: line.color,
              dataPoints: competence.progress.map((progress) => {
                return {
                  x: progress.measurementMoment,
                  y: progress.value,
                };
              }),
            };
          }),
          // data: [
          //   {
          //     type: "line",
          //     showInLegend: true,
          //     name: ": Op object balanceren",
          //     markerColor: "Black",
          //     xValueFormatString: "DD MMM, YYYY",
          //     color: "#0070C0",
          //     dataPoints: [
          //       { x: new Date(2021, 1, 18), y: 14.54 },
          //       { x: new Date(2021, 1, 5), y: 4.28 },
          //       { x: new Date(2021, 0, 15), y: 3.54 },
          //       { x: new Date(2020, 11, 8), y: 2.42 },
          //       { x: new Date(2020, 10, 15), y: -0.26 },
          //       { x: new Date(2020, 9, 9), y: 1.25 },
          //       { x: new Date(2020, 9, 2), y: 0 },
          //     ],
          //   },
          //   {
          //     type: "line",
          //     showInLegend: true,
          //     name: ": Balanceren op 1 been",
          //     lineDashType: "dash",
          //     markerColor: "Black",
          //     color: "#00B0F0",
          //     dataPoints: [
          //       { x: new Date(2021, 1, 9), y: 15.01 },
          //       { x: new Date(2020, 11, 22), y: 11.5 },
          //       { x: new Date(2020, 11, 8), y: 7.86 },
          //       { x: new Date(2020, 10, 22), y: 9.21 },
          //       { x: new Date(2020, 9, 24), y: 4.52 },
          //       { x: new Date(2020, 9, 15), y: 3.9 },
          //       { x: new Date(2020, 8, 15), y: 0 },
          //     ],
          //   },
          //   {
          //     type: "line",
          //     showInLegend: true,
          //     name: ": Op de tenen staan",
          //     lineDashType: "dash2",
          //     markerColor: "Black",
          //     color: "#9BC2E6",
          //     dataPoints: [
          //       { x: new Date(2021, 0, 23), y: 2.43 },
          //       { x: new Date(2021, 0, 5), y: 5.02 },
          //       { x: new Date(2020, 11, 5), y: 3.71 },
          //       { x: new Date(2020, 10, 5), y: 1.02 },
          //       { x: new Date(2020, 8, 30), y: 0 },
          //     ],
          //   },
          // ],
        });
        chart.render();

        function toogleDataSeries(e) {
          if (
            typeof e.dataSeries.visible === "undefined" ||
            e.dataSeries.visible
          ) {
            e.dataSeries.visible = false;
          } else {
            e.dataSeries.visible = true;
          }
          chart.render();
        }
      };
    </script>
  </head>
  <body>
    <ul class="nav">
      <li>Exergames</li>
      <li>|</li>
      <li><a href="#">Proftaak</a></li>
      <li><a href="#">DEV</a></li>
    </ul>

    <div id="dashboard">
      <h1>Individueel rapport</h1>

      <div id="dataKind" class="dataDashboard">
        <img src="image/avatar.png" alt="avatar" />

        <div>
          <p>NAAM</p>
          <p>GEBOORTEDATUM</p>
          <p>VOORTGANGSSTATUS</p>
          <br />
          <p>KLAS</p>
        </div>

        <div>
          <p id="naam">: NAAM</p>
          <p id="geboortedatum">: GEBOORTEDATUM</p>
          <p id="status">: VOORTGANGSSTATUS</p>
          <br />
          <p id="klas">: KLAS</p>
        </div>

        <div>
          <h1>Motorische</h1>
          <h1>vaardigheid</h1>
        </div>

        <button>
          <h1 id="score">Score</h1>
        </button>
      </div>

      <div id="dataGrafiek" class="dataDashboard">
        <div id="chartContainer" style="height: 500px; width: 90%"></div>
      </div>
    </div>

    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
  </body>
</html>
